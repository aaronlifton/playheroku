@(form: play.api.data.Form[String], thread: models.Thread, messages: Seq[models.Message])

@main("Assembly.io") {
	<div class="masthead">
	        <h3 class="muted">Assembly.io</h3>
	        <div class="navbar">
	          <div class="navbar-inner">
	            <div class="container">
	              <ul class="nav">
  	                <li class="active"><a href="/">Home</a></li>
	                <li><a href="#">Messages</a></li>
	                <li><a href="#">Services</a></li>
	                <li><a href="#">Downloads</a></li>
	                <li><a href="#">About</a></li>
	                <li><a href="#">Contact</a></li>
	              </ul>
	            </div>
	          </div>
	        </div><!-- /.navbar -->
	      </div>

  <hr>
  
	<h2>@thread.name</h2>    
    <div class="row-fluid">
		<div class="span12 well">
		    @helper.form(action = routes.Application.addThread) {
		        <textarea class="span6" id="body" name="body"
		        placeholder="Type in your message" rows="5"></textarea>
		        <h6 class="pull-right">320 characters remaining</h6><br />
		        <input id="messageSubmit" class="btn btn-info" type="submit" value="Post New Message" />
			}
		</div>
      </div>
	
	<script type="text/javascript">var thread_id=@thread.id</script>
	
	<div id="messages">
	@messages.map { message =>
		<div class="well">@message.id - @message.body</div>
	}
	</div>
}
<script src="@routes.Assets.at("javascripts/thread.min.js")" type="text/javascript"></script>
<script type="text/javascript">
    // Enable pusher logging - don't include this in production
    Pusher.log = function(message) {
      if (window.console && window.console.log) window.console.log(message);
    };

    // Flash fallback logging - don't include this in production
    WEB_SOCKET_DEBUG = true;

    var pusher = new Pusher('55b5e3dcfcf7f9ac7bb9');
    var channel = pusher.subscribe('new-messages-scala');
    channel.bind('new-message', function(data) {
      alert(data);
    });
    channel.trigger("new-message", "{test}");
    
  </script>
